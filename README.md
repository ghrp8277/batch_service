# batch_service

![image](https://github.com/user-attachments/assets/c9b6198e-cf2d-47e6-958a-30d0fa174912)


## 주요 기능

### 스레드 풀 크기 조정
- 리틀의 법칙 적용하여 최적의 스레드 수 계산
- CPU 코어 수와 사용 가능한 메모리를 기반으로 최적 스레드 수 결정
- 스레드 풀 크기 동적 조정으로 성능 최적화

### 데이터 수집 및 저장
- 초기 데이터 수집: 최대 일수의 데이터를 모든 주식에 대해 수집하고 저장
- 일일 데이터 수집: 매일 최신 데이터를 각 주식에 대해 수집하고 저장
- 데이터 저장: 수집된 데이터를 데이터베이스에 저장, 기존 데이터가 없거나 업데이트가 필요한 경우에만 저장

### 지표 계산
- 모든 주식에 대한 지표 계산 및 저장
- 스레드 풀을 통해 병렬로 지표 계산 작업 처리
- 지표 종류:
  - 이동평균선 (5일: 녹색, 20일: 빨간색, 60일: 주황색, 120일: 보라색)
  - 볼린저 밴드: 노란색 밴드
  - MACD: 맨 아래 차트로 표시

### 예외 처리 및 재시도
- 데이터 수집 및 지표 계산 중 예외 발생 시 최대 재시도 횟수까지 재시도
- 재시도 실패 시 예외 로그 기록
